<div class="app-page-header clr-row">
  <div class="clr-col-sm-12">
    <div class="card">
      <div class="card-header">
        <h2>Gestion des départments</h2>
        <div class="app-intro">
          <span>Les départments définissent des entités des regroupant des groupes d'utilisateur pouvant effectuer des
            activités bien définis par des autorisations</span>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="clr-row app-content-container">
  <div class="clr-col-12">
    <ng-container *ngIf="state$ | async as vm">
      <clr-datagrid #clrDataGrid [clrDgLoading]="vm?.performingAction" (clrDgRefresh)="onDgRefresh($event)"
        class="datagrid-compact">
        <clr-dg-action-bar>
          <drewlabs-datgrid-header (createEvent)="handleCreateEvent()" (refreshEvent)="onDgHeaderRefresh()"
            [showAssignmentButton]="false" [showExportDropdown]="false"></drewlabs-datgrid-header>
        </clr-dg-action-bar>
        <clr-dg-column [clrDgField]="'id'">ID</clr-dg-column>
        <clr-dg-column [clrDgField]="'name'">Intitulé du département</clr-dg-column>
        <clr-dg-column [clrDgField]="'description'">description</clr-dg-column>
        <clr-dg-column [clrDgField]="'roles_label'">Roles</clr-dg-column>
        <clr-dg-row *ngFor="let item of vm?.dataSource?.data">
          <clr-dg-action-overflow><button class="action-item" (click)="handleItemSelectEvent(item.id)">ÉDITER</button>
          </clr-dg-action-overflow>
          <clr-dg-cell>{{ item?.id }}</clr-dg-cell>
          <clr-dg-cell>{{ item?.name | uppercase }}</clr-dg-cell>
          <clr-dg-cell>{{ item?.description | uppercase}}</clr-dg-cell>
          <clr-dg-cell>{{ item?.rolesAsString }}</clr-dg-cell>
        </clr-dg-row>
        <clr-dg-footer>
          <clr-dg-pagination #pagination [clrDgPageSize]="initialGridState?.per_page"
            [clrDgTotalItems]="vm?.dataSource?.total">
            <clr-dg-page-size [clrPageSizeOptions]="[10, 20, 30]"></clr-dg-page-size>
            {{ pagination.firstItem + 1}} - {{pagination.lastItem + 1}}
            {{ 'pagination.of' | translate}} {{pagination.totalItems}}
            Départements
          </clr-dg-pagination>
        </clr-dg-footer>
      </clr-datagrid>
    </ng-container>
  </div>
</div>
